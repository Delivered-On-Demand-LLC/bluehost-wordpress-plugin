dist: trusty

language: php

php:
  - 7.1

script:
  -

before_deploy:
  - npm install
  - composer install --no-ansi --no-interaction --no-dev --optimize-autoloader --no-progress --no-scripts
  - rm -rf node_modules
  - rm -rf src
  - rm -rf tests
  - rm -rf .git
  - rm webpack.config.js
  - find . -name ".*" -type f -delete
  - find . -name "*.json" -type f -delete
  - find . -name "*.lock" -type f -delete
  - cd ..
  - zip -r "bluehost-wordpress-plugin.zip" "bluehost-wordpress-plugin"

deploy:
  provider: releases
  api_key:
    secure:
  file: "bluehost-wordpress-plugin.zip"
  skip_cleanup: true
  on:
    repo: wpscholar/hello-world
    tags: true